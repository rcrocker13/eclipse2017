<!doctype html>
<html>
<head>
	<script src="d3.v4.min.js"></script>
  <script src="https://d3js.org/topojson.v1.min.js"></script>
	<script src="https://d3js.org/d3-array.v1.min.js"></script>
	<script src="https://d3js.org/d3-geo.v1.min.js"></script>
	<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
	<script src="http://d3js.org/colorbrewer.v1.min.js"></script>
	<style>
		path.countries {
			stroke-width:  1;
			stroke:  #75739F;
			fill:  #5EAFC6;
		}
		circle.cities {
			stroke-width:  1;
			stroke:  #4F442B;
			fill:  #FCBC34;
		}
		circle.centroid {
			fill:  #75739f;
			pointer-events:  none;
		}
		rect.bbox {
			fill:  none;
			stroke-dasharray: 5 5;
			stroke:  #75739F;
			stroke-width:  2;
			pointer-events:  none;
		}
		path.graticule {
			fill:  none;
			stroke-width: 1;
			stroke:  #EEEEEE;
		}
		path.graticule.outline {
			stroke:  #9A8B7A;
		}
		path.merged {
			fill:  #9A8B7A;
			stroke:  #4F442B;
			stroke-width:  2px;
		}
	</style>
</head>
<body>
		<div id="vizcontainer"></div>
		<svg style="width:500px;height:500px;border:1px lightgray solid;"></svg>
		<script src="test.js">

			// d3.queue()
			// 	.defer(d3.json, "world.geojson")
			// 	// .defer(d3.csv, "cities.csv")
			// 	// .defer(d3.csv, "eclipse_only.csv")
			// 	// .defer(d3.csv, "EclipseWithDate.csv")
			// 	.defer(d3.json, "eclipse_simplifed.geojson")
			// 	.await(function(error, file1, file2) {
			// 	          createMap(file1, file2);
			// });

			// function createMap(countries, eclipses) {
			// 	const svg = d3.select('svg');
			// 	const path = svg.append('path');
			// 	const projection = d3.geoOrthographic();
			// 	const initialScale = projection.scale();
			// 	const geoPath = d3.geoPath().projection(projection);

			// 	let rotate0, coords0;
			// 	const renderCountries = () => projection.rotate(rotate0).invert([d3.event.x, d3.event.y]);

			// 	svg
			// 		.call(d3.drag()
			// 			.on("start", () => {
			// 				rotate0 = projection.rotate();
			// 				coords0 = coords();
			// 			})
			// 			.on('drag', () => {
   //          	const coords1 = coords();
   //          	projection.rotate([
   //            	rotate0[0] + coords1[0] - coords0[0],
   //            	rotate0[1] + coords1[1] - coords0[1],
   //          	])
   //          	render();
   //          }));
   //          }
			// 	// // eclipse = eclipses.features.filter( eclipse => eclipse.id === 0);
			// 	// // console.log('eclipse', eclipse) // just one eclipse

			// 	// var countryFeature = countries.features;
			// 	// var eclipseFeature = eclipses.features;
			// 	// // var projection = d3.geoOrthographic()
			// 	// //  .scale(200)
			// 	// //  .translate([250, 250])
			// 	// //  .center([0,0]);
			// 	// // var geoPath = d3.geoPath()
			// 	// //  	.projection(projection);
			// 	// // var geoPathEclipse = d3.geoPath()
			// 	// //  	.projection(projection);
			// 	// var featureSize = d3.extent(countries.features, d => geoPath.area(d));
			// 	// // var countryColor = d3.scaleQuantize()
			// 	// // 	.domain(featureSize).range(colorbrewer.Reds[7]);
			// 	// var graticule = d3.geoGraticule();
			// 	// var mapZoom = d3.zoom()
			// 	// 	.on("zoom", zoomed);
			// 	// var zoomSettings = d3.zoomIdentity
			// 	// 	.translate(0,0)
			// 	// 	.scale(200);
			// 	// var rotateScale = d3.scaleLinear()
			// 	// 	.domain([-500, 0, 500])
			// 	// 	.range([-180, 0, 180]);

			// 	// d3.select("svg")
			// 	// 	.call(mapZoom)
			// 	// 	.call(mapZoom.transform, zoomSettings);

			// 	// function zoomed() {
			// 	// 	var e = d3.event;
			// 	// 	var eX = e.x;
			// 	// 	var eY = e.y;
			// 	// 	var currentRotate = rotateScale(e.transform.x) % 360;

			// 	// 	projection
			// 	// 		.rotateX([currentRotate, 0])
			// 	// 		.rotateY([currentRotate, 0])
			// 	// 		.scale(e.transform.k);

			// 	// 	d3.selectAll(".countries")
			// 	// 		.attr("d", geoPath)
			// 	// 		.style("fill", "#CCCCCC")
			// 	// 		.style("stroke", d3.rgb("#CCCCCC").darker());

			// 	// 	d3.selectAll(".eclipse")
			// 	// 		.attr("d", geoPath)
			// 	// 		.style("fill", "#CCCCCC")
			// 	// 		.style("stroke", d3.rgb("#CCCCCC").darker());
			// 	// }

			// 	// d3.select("svg").selectAll("path.countries")
			// 	// 	.data(countryFeature)
			// 	// 	.enter()
			// 	// 	.append("path")
			// 	// 	.attr("d", geoPath)
			// 	// 	.attr("class", "countries")
			// 	// 	.style("fill", "#CCCCCC")
			// 	// 	.style("stroke", d3.rgb("#CCCCCC").darker());

			// 	// d3.select("svg").selectAll("path.eclipse")
			// 	// 	.data(eclipseFeature)
			// 	// 	.enter()
			// 	// 	.append("path")
			// 	// 	.attr("d", geoPath)
			// 	// 	.attr("class", "eclipse")
			// 	// 	.style("fill", "#CCCCCC")
			// 	// 	.style("stroke", d3.rgb("#CCCCCC").darker());

			// // }

		</script>
</body>
</html>